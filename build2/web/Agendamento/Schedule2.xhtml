<?xml version="1.0" encoding="UTF-8"?>

To change this template, choose Tools | Templates
and open the template in the editor.

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">

    <ui:composition template="../template.xhtml">
        <ui:define name="titulo"  >
            <span style="margin-left: 10px; font-size: 22px; font-family: sans-serif; color: #999999 ; "> Calendário de Bancas </span>
        </ui:define>
        <ui:define name="conteudo">

            <div class="col-md-12" style="margin-top: 40px">          
                <div class="form-group"> 
                    <h:form >
                        <h:commandButton id="criarBanca" value="Adicionar" class="btn btn-primary">
                            <p:ajax oncomplete="dialogoEventoNovaBanca.show()" update=":formularioEventoNovaBanca:painelEventoNovaBanca" />
                        </h:commandButton>
                    </h:form>
                </div>
            </div>

            <h:form id="Evento">
                <div class="col-md-12" style="margin-top: 40px">          
                    <div class="form-group">
                        <p:growl />
                        <p:schedule  value="#{scheduleController.eventos}" timeZone="America/Noronha" locale="pt" style="width: 800px" >
                            <p:ajax event="dateSelect" listener="#{scheduleController.onDateSelect}" oncomplete="dialogoEventoNovaBanca.show()" update=":formularioEventoNovaBanca:painelEventoNovaBanca" />
                            <p:ajax event="eventSelect" listener="#{scheduleController.onEventSelect}" oncomplete="dialogoSelectBanca.show()" update=":formModalSelectBanca:painelModalSelectBanca" />
                           <p:ajax event="eventMove" listener="#{scheduleController.onEventMove(selectEvent)}" oncomplete="" update="" />
                           <p:ajax event="eventResize" listener="#{bancaController.onEventResize(selectEvent)}" oncomplete="" update="" />
                        </p:schedule>
                    </div>
                </div>
            </h:form>

            <p:dialog  widgetVar="dialogoEventoNovaBanca"  header="Adicionar Banca" closable="true" draggable="true" modal="true" resizable="true"   >
                <h:form id="formularioEventoNovaBanca">

                    <h:panelGrid id="painelEventoNovaBanca" columns="1">
                        <h:outputLabel value="Trabalho" />
                        <p:selectOneMenu value="#{bancasController.banca.trabalho}"
                                         converter="trabalhoConverter"
                                         style="width: 250px; float: left "
                                         >
                            <f:selectItem 
                                noSelectionOption="true" 
                                itemLabel="Selecione um trabalho"/>

                            <f:selectItems
                                value="#{trabalhoController.listar()}"
                                var="t"
                                itemLabel="#{t.titulo}"
                                itemValue="#{t}" />

                        </p:selectOneMenu>

                        <h:outputLabel style="margin-top: 10px;" value="Dia Previsto:" />
                        <p:calendar timeZone="GMT-03:00" showOn="button" value="#{bancasController.banca.diaPrevisto}" locale="pt" requiredMessage="Informe o Dia" />

                        <h:outputLabel style="margin-top: 10px;" value="Horário Previsto:" />
                        <p:calendar timeZone="GMT-03:00" id="time" title="Horário" label="Horário" value="#{bancasController.banca.horarioPrevisto}" pattern="HH:mm" timeOnly="true" requiredMessage="Informe o Horário"  />

                        <h:outputLabel style="margin-top: 10px;" value="bloco/Local:" />
                        <p:inputText value="#{bancasController.banca.bloco}" />

                        <h:outputLabel style="margin-top: 10px;" value="Descrição:" />
                        <p:inputText value="#{bancasController.banca.descricao}" />
                    </h:panelGrid>

                    <div class="col-md-12" style="margin-top: 40px">          
                        <div class="form-group"> 
                            <h:commandButton value="Salvar" action="#{bancasController.salvar()}" styleClass="btn btn-primary btn-space " />
                            <h:commandButton value="Cancelar"  styleClass="btn btn-default btn-space " />
                        </div>
                    </div>
                </h:form>
            </p:dialog>

            <p:dialog widgetVar="dialogoSelectBanca" header="Opções" modal="true" resizable="false">
                <h:form id="formModalSelectBanca">
                    <h:panelGrid id="painelModalSelectBanca" columns="1" style="width: 500px;" >

                        <h:outputLabel for="titulo" value="Título:" style="margin-top: 10px;" />
                        <li style="font-size: 15px; font-family: calibri, arial,sans-serif;" class="list-group-item"> #{bancaScheduleController.banca.trabalho.titulo} </li>

                        <h:outputLabel for="aluno" value="Aluno:" style="margin-top: 10px;" />
                        <li style="font-size: 15px; font-family: calibri, arial,sans-serif;" class="list-group-item">#{bancaScheduleController.banca.trabalho.cursoAluno.aluno.nome} </li>

                        <h:outputLabel for="professor" value="Orientador:" style="margin-top: 10px;" />
                        <li style="font-size: 15px; font-family: calibri, arial,sans-serif;" class="list-group-item">#{bancaScheduleController.banca.trabalho.cursoProfessor.professor.nome} </li>

                        <h:outputLabel value="Data/Dia:" style="margin-top: 10px;" />
                        <p:calendar  disabled="true" showOn="button"   locale="pt" value="#{bancaScheduleController.banca.diaPrevisto}" timeZone="" required="true" />

                        <h:outputLabel for="time" value="Horário:" style="margin-top: 10px;" />
                        <p:calendar  disabled="true" id="time" title="Horário" label="Horário" value="#{bancaScheduleController.banca.horarioPrevisto}" pattern="HH:mm" timeOnly="true" requiredMessage="Informe o Horário"  />

                    </h:panelGrid>

                    <div class="col-md-12" style="margin-top: 40px">  

                        <h:commandButton  value="Compor Banca"   styleClass="btn btn-primary btn-space " action="#{bancaScheduleController.comporBanca(bancaScheduleController.banca)}"  />

                        <h:commandButton  value="Ata de Defesa" class="btn btn-primary btn-space" action="#{bancaScheduleController.gerarAtaDefesa(bancaScheduleController.banca )}"/>
                       
                        <h:commandButton id="Composicao" value="Avaliadores" action="#{bancaScheduleController.consultarComposiçãoAjax(bancaScheduleController.banca)}"  class="btn btn-primary btn-space">
                            <p:ajax oncomplete="dialogoComposicao.show()" update=":formularioComposicao:painelComposicao" />
                        </h:commandButton>

                        <h:commandButton  value="Cancelar"  styleClass="btn btn-default btn-space " />
                    </div>
                </h:form>
            </p:dialog>
        </ui:define>
    </ui:composition>
</html>
